/* global calIframeHeight */function getParameterByName(e,t){var n="[\\?&]"+t+"=([^&#]*)",r=new RegExp(n),i=r.exec(e);t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))}function calIframeHeight(){var e=$(document).find("div.page-container"),t=0;e.children().each(function(){t+=$(this).outerHeight(!0)});t+=$(document).find("footer").outerHeight(!0);return t}function gotoToC(){var e="d2l/le/content/"+getParameterByName(window.location.href,"ou")+"/Home";top.location.href=D2LROOT+e}function gotoGrades(){var e="d2l/lms/grades/my_grades/main.d2l?ou="+getParameterByName(window.location.href,"ou");top.location.href=D2LROOT+e}function gotoDropbox(){var e="d2l/lms/dropbox/user/folders_list.d2l?ou="+getParameterByName(window.location.href,"ou")+"&isprv=0";top.location.href=D2LROOT+e}function gotoDiscussions(){var e="d2l/le/"+getParameterByName(window.location.href,"ou")+"/discussions/List";top.location.href=D2LROOT+e}$(document).ready(function(){function n(){($("abbr").length||$(".with-tooltip").length)&&r();$(".with-popover").length&&i();$(".with-tabs").length&&s();$(".with-accordion").length&&o();$(".with-subnav").length&&u();$(".with-zoom").length&&a();($(".with-accordion").length||$(".with-tabs").length)&&e&&t.css("height",calIframeHeight()+"px")}function r(){$("abbr, .with-tooltip").on("mouseover",function(){var e=$(this).attr("title"),t=$(this).position();$(this).attr("title","").css("position","relative");if($(this).hasClass("top")){$(this).before('<div class="tooltip in top"><div class="tooltip-inner">'+e+'</div><div class="tooltip-arrow"></div></div>');$(".tooltip").css({top:t.top-28+"px",left:t.left+"px"})}else if($(this).hasClass("bottom")){$(this).after('<div class="tooltip in bottom"><div class="tooltip-inner">'+e+'</div><div class="tooltip-arrow"></div></div>');$(".tooltip").css({bottom:t.bottom+28+"px",left:t.left+"px"})}else if($(this).hasClass("right")){$(this).before('<div class="tooltip in right"><div class="tooltip-inner">'+e+'</div><div class="tooltip-arrow"></div></div>');$(".tooltip").css({top:t.top+"px",left:t.left+$(this).width()+"px"})}else if($(this).hasClass("left")){$(this).before('<div class="tooltip in left"><div class="tooltip-inner">'+e+'</div><div class="tooltip-arrow"></div></div>');$(".tooltip").css({top:t.top+"px",left:t.left-($(".tooltip").width()+8)+"px"})}else{$(this).before('<div class="tooltip in"><div class="tooltip-inner">'+e+'</div><div class="tooltip-arrow"></div></div>');$(".tooltip").css({top:t.top-28+"px",left:t.left+"px"})}$("abbr, .with-tooltip").on("mouseout",function(){$(this).attr("title",$(".tooltip.in .tooltip-inner").html()).css("position","static");$(".tooltip").remove()})})}function i(){$(".with-popover").each(function(e){var t=$(this).attr("data-title"),n=$(this).position();if($(this).hasClass("top")){$("body").append('<div class="popover top"><div class="popover-content">'+t+'</div><div class="arrow"></div></div>');$(".popover:eq("+e+")").css({top:n.top-($(".popover:eq("+e+")").innerHeight()+8)+"px",left:n.left+"px"})}else if($(this).hasClass("bottom")){$("body").append('<div class="popover bottom"><div class="popover-content">'+t+'</div><div class="arrow"></div></div>');$(".popover:eq("+e+")").css({top:n.top+$(this).height()+4+"px",left:n.left+"px"})}else if($(this).hasClass("right")){$("body").append('<div class="popover right"><div class="popover-content">'+t+'</div><div class="arrow"></div></div>');$(this).is("img")?$(".popover:eq("+e+")").css({top:n.top+$(this).height()/2+"px",left:n.left+$(this).width()+3+"px"}):$(".popover:eq("+e+")").css({top:n.top-$(this).height()+"px",left:n.left+$(this).width()+3+"px"})}else if($(this).hasClass("left")){$("body").append('<div class="popover left"><div class="popover-content">'+t+'</div><div class="arrow"></div></div>');$(this).is("img")?$(".popover:eq("+e+")").css({top:n.top+$(this).height()/2+"px",left:n.left-$(".popover").width()+100+"px"}):$(".popover:eq("+e+")").css({top:n.top-$(this).height()+"px",left:n.left-$(".popover").width()-5+"px"})}else{$("body").append('<div class="popover"><div class="popover-content">'+t+'</div><div class="arrow"></div></div>');$(".popover:eq("+e+")").css({top:n.top-($(".popover:eq("+e+")").innerHeight()+8)+"px",left:n.left+"px"})}});$(".with-popover").on("click",function(){var e=$(".with-popover").index(this);if($(this).hasClass("active")){$(this).removeClass("active");$(".popover:eq("+e+")").removeClass("in")}else{$(this).addClass("active");$(".popover:eq("+e+")").addClass("in")}})}function s(){$(".with-tabs").each(function(n){$(this).attr("data-id",n);$(".with-tabs[data-id='"+n+"'] .tabs li").on("click",function(){var r=$(".with-tabs[data-id='"+n+"'] .tabs li").index(this);$(".with-tabs[data-id='"+n+"'] .tabs li").each(function(){$(".with-tabs[data-id='"+n+"'] .tabs li").hasClass("active")&&$(this).removeClass("active")});$(this).addClass("active");$(".with-tabs[data-id='"+n+"'] .tab-contents section").each(function(){$(".with-tabs[data-id='"+n+"'] .tab-contents section").hasClass("active")&&$(this).removeClass("active")});$(".with-tabs[data-id='"+n+"'] .tab-contents section:eq("+r+")").addClass("active");e&&t.css("height",calIframeHeight()+"px");return!1})})}function o(){$(".with-accordion").each(function(n){$(this).attr("id","ai"+n);$("#ai"+n).prepend('<div class="accordion-controls"><a class="closeAll" href="javascript:void(0)">Close All</a> <a class="openAll" href="javascript:void(0)">Open All</a></div>');$(this).hasClass("no-arrow")||$(this).find(".accordion-title").each(function(){$(this).append('<div class="indicator"></div>')});$("#ai"+n+" .closeAll").on("click",function(){$("#ai"+n+" .accordion-title").each(function(r){$(this).hasClass("active")&&$("#ai"+n+" > .accordion-content:eq("+r+")").slideUp("fast",function(){$("#ai"+n+" > .accordion-title:eq("+r+")").removeClass("active");e&&t.css("height",calIframeHeight()+"px")})})});$("#ai"+n+" .openAll").on("click",function(){$("#ai"+n+" .accordion-title").each(function(e){$(this).hasClass("active")||$("#ai"+n+" > .accordion-content:eq("+e+")").slideDown("fast",function(){$("#ai"+n+" > .accordion-title:eq("+e+")").addClass("active")})})});$("#ai"+n+" .accordion-title").each(function(e){$(this).hasClass("active")&&$("#ai"+n+" > .accordion-content:eq("+e+")").show()});$("#ai"+n+" .accordion-title").on("click",function(){var r=$("#ai"+n+" .accordion-title").index(this);$(this).hasClass("active")?$("#ai"+n+" > .accordion-content:eq("+r+")").slideUp("fast",function(){$("#ai"+n+" > .accordion-title:eq("+r+")").removeClass("active");e&&t.css("height",calIframeHeight()+"px")}):$("#ai"+n+" .accordion-title").each(function(i){if($(this).hasClass("active")){$(this).removeClass("active");$("#ai"+n+" > .accordion-content:eq("+i+")").slideUp("fast",function(){$("#ai"+n+" > .accordion-title:eq("+r+")").addClass("active");$("#ai"+n+" > .accordion-content:eq("+r+")").slideDown();e&&t.css("height",calIframeHeight()+"px")})}else if(i===r){$("#ai"+n+" > .accordion-title:eq("+r+")").addClass("active");$("#ai"+n+" > .accordion-content:eq("+r+")").slideDown()}});return!1})})}function u(){var e='<ul class="page-subnav">';$("header").before('<a class="anchorTop" id="page-top" href="#"></a>');$(".anchorTop").css({display:"block",position:"relative",top:"-32px",visibility:"hidden"});$(".with-subnav h2").each(function(t){$(this).before('<a class="anchor" id="nav'+t+'" href="#"></a>');t!==0&&$(this).before('<small><a href="#page-top">Back to top</a></small>');e+='<li><a href="#nav'+t+'">'+$(this).html()+"</a></li>"});e+="</ul>";$(".with-subnav").prepend(e);$(".anchor").css({display:"block",position:"relative",top:"32px",visibility:"hidden"})}function a(){var e=0,t=0;$(".with-zoom").each(function(n){$(this).attr("id","wiz"+n);$("#wiz"+n).css("width",$("#wiz"+n+" .small").width()+"px");$("#wiz"+n+" .magnify").css({"background-image":"url("+$("#wiz"+n+" .small").attr("src")+")","background-repeat":"no-repeat"});$("#wiz"+n).mousemove(function(r){if(!e&&!t){var i=new Image;i.src=$("#wiz"+n+" .small").attr("src");e=i.width;t=i.height}else{var s=$(this).offset(),o=r.pageX-s.left,u=r.pageY-s.top;if(o<$(this).width()&&u<$(this).height()&&o>0&&u>0)$("#wiz"+n+" .magnify").fadeIn(100);else{$("#wiz"+n+" .magnify").fadeOut(100);e=0;t=0}if($("#wiz"+n+" .magnify").is(":visible")){var a=Math.round(o/$("#wiz"+n+" .small").width()*e-$("#wiz"+n+" .magnify").width()/2)*-1,f=Math.round(u/$("#wiz"+n+" .small").height()*t-$("#wiz"+n+" .magnify").height()/2)*-1,l=a+"px "+f+"px",c=o-$("#wiz"+n+" .magnify").width()/2,h=u-$("#wiz"+n+" .magnify").height()/2;$("#wiz"+n+" .magnify").css({left:c,top:h,"background-position":l})}}})})}var e=!1,t=null;if(parent===top){t=$(parent.document).find("div#ContentView").find("iframe");t.attr("allowfullscreen","");t.attr("webkitallowfullscreen","");t.attr("mozallowfullscreen","");e=!0}n()});var D2LROOT="https://uwli.courses.wisconsin.edu/";